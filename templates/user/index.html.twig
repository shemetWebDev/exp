{% extends 'base.html.twig' %}

{% set base = 'profile' %}

{% block title %}–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
{% endblock %}

{% block body %}
	<section class="{{ base }}">
		<header class="{{ base }}__header">
			<div class="{{ base }}__user">
				<div class="{{ base }}__avatar" aria-hidden="true">{{ user.username|first|upper }}</div>
				<div>
					<h1 class="{{ base }}__title">–ü—Ä–∏–≤–µ—Ç,
						{{ user.username }}!</h1>
					<p class="{{ base }}__email">{{ user.email }}</p>
				</div>
			</div>
			<div class="{{ base }}__header-actions">
				<a href="{{ path('app_edit_profil') }}" class="{{ base }}__btn {{ base }}__btn--primary">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
				<a href="{{ path('app_logout') }}" class="{{ base }}__btn {{ base }}__btn--ghost">–í—ã–π—Ç–∏</a>
			</div>
		</header>

		<div
			class="{{ base }}__grid">
			{# –°–µ–∫—Ü–∏—è ¬´–í–∞—à–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è¬ª #}
			<section class="{{ base }}__section">
				<div class="{{ base }}__section-head">
					<h2 class="{{ base }}__section-title">–í–∞—à–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</h2>
					<a href="{{ path('app_ads_new') }}" class="{{ base }}__link">+ –î–æ–±–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</a>
				</div>

				{% if usersAds is not empty %}
					<ul class="{{ base }}__list">
						{% for ad in usersAds %}
							<li class="{{ base }}__item">
								<div class="{{ base }}__item-main">
									<h3 class="{{ base }}__item-title">{{ ad.title }}</h3>
									{% if ad.description is defined and ad.description %}
										<p class="{{ base }}__item-desc">
											{{ ad.description|length > 120 ? ad.description|slice(0, 120) ~ '‚Ä¶' : ad.description }}
										</p>
									{% endif %}
								</div>
								<div class="{{ base }}__item-actions">
									<a href="{{ path('app_ads_edit', {'id': ad.id}) }}" class="{{ base }}__btn {{ base }}__btn--soft">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
									{{ include('ads/_delete_form.html.twig', { button_class: base ~ '__btn ' ~ base ~ '__btn--danger' }) }}
								</div>
							</li>
						{% endfor %}
					</ul>
				{% else %}
					<div class="{{ base }}__empty">
						<div class="{{ base }}__empty-icon" aria-hidden="true">üì≠</div>
						<p class="{{ base }}__empty-text">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π.</p>
						<a href="{{ path('app_ads_new') }}" class="{{ base }}__btn {{ base }}__btn--primary">–°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</a>
					</div>
				{% endif %}
			</section>

			{# –°–µ–∫—Ü–∏—è ¬´–í–∞—à–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã¬ª #}
			<section class="{{ base }}__section">
				<div class="{{ base }}__section-head">
					<h2 class="{{ base }}__section-title">–í–∞—à–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</h2>
					<a href="{{ path('user_page_create') }}" class="{{ base }}__link">+ –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É</a>
				</div>

				{% if pages is not empty %}
					<ul class="{{ base }}__list">
						{% for page in pages %}
							<li class="{{ base }}__item">
								<div class="{{ base }}__item-main">
									<h3 class="{{ base }}__item-title">{{ page.title }}</h3>
									{% if page.subtitle %}
										<p class="{{ base }}__item-meta">
											<strong>–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫:</strong>
											{{ page.subtitle }}</p>
									{% endif %}
									{% if page.phone %}
										<p class="{{ base }}__item-meta">
											<strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong>
											{{ page.phone }}</p>
									{% endif %}
									{% if page.adress %}
										<p class="{{ base }}__item-meta">
											<strong>–ê–¥—Ä–µ—Å:</strong>
											{{ page.adress }}</p>
									{% endif %}
									{% if page.email %}
										<p class="{{ base }}__item-meta">
											<strong>Email:</strong>
											{{ page.email }}</p>
									{% endif %}
								</div>
								<div class="{{ base }}__item-actions">
									<a href="{{ path('user_page_show', {'slug': page.slug}) }}" class="{{ base }}__btn {{ base }}__btn--soft">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å</a>
									<a href="{{ path('user_page_edit', {'id': page.id}) }}" class="{{ base }}__btn {{ base }}__btn--soft">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
									<form action="{{ path('user_page_delete', {'id': page.id}) }}" method="post" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—É?');" class="{{ base }}__inline-form">
										<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ page.id) }}">
										<button type="submit" class="{{ base }}__btn {{ base }}__btn--danger">–£–¥–∞–ª–∏—Ç—å</button>
									</form>
								</div>
							</li>
						{% endfor %}
					</ul>
				{% else %}
					<div class="{{ base }}__empty">
						<div class="{{ base }}__empty-icon" aria-hidden="true">üóÇÔ∏è</div>
						<p class="{{ base }}__empty-text">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü.</p>
						<a href="{{ path('user_page_create') }}" class="{{ base }}__btn {{ base }}__btn--primary">–°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É</a>
					</div>
				{% endif %}
			</section>
		</div>
	</section>
{% endblock %}
